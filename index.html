<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="stylesheet" type="text/css" href="styles.css">
  <link rel="stylesheet" type="text/css" href="./css/98.css">

  <title>Sebastian Giro / Me</title>
</head>
<body>

  <div class="window window-stats">
    <div class="title-bar">
      <div class="title-bar-text">
        Sebastian Giro Stats
      </div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close"></button>
      </div>
    </div>

    <div id="me-stats" class="window-body">
      <p id="me-alive"><span>Alive:</span> <strong>-</strong></p>
      <p id="me-height"><span>Height:</span> <strong>-</strong></p>
      <p id="me-age"><span>Age:</span> <strong>-</strong></p>
      <p id="me-sex"><span>Sex:</span> <strong>-</strong></p>
    </div>
  </div>

</body>

<script>

  window.addEventListener('load', () => {
    this.init();
  }, false);

  function init() {
    const me = {
      'alive': true,
      'height': '1.79cm',
      'age': this.getAge('September 25, 92 GMT-0300'),
      'sex': 'M'
    };

    loadStats(me);
  }

  function loadStats(me) {
    const birthday = new Date('September 25, 92 GMT-0300');
    const meStats = document.getElementById('me-stats');

    for (const statName in me) {
      if (me.hasOwnProperty(statName)) {
        const stat = me[statName];
        try {
          const element = document.getElementById('me-' + statName);
          element.getElementsByTagName('strong')[0].innerHTML = stat;
        } catch (error) {
          console.error("Missing field:", statName)
        }
      }
    }
  }

  function getAge(birthday) {
    const today = new Date();
    const birthDate = new Date(birthday);
    let age = today.getFullYear() - birthDate.getFullYear();
    const m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
      age--;
    }
    return age;
  }

</script>

</html>